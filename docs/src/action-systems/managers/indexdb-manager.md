# class - IndexDBManagermanages access and transactions with index db     Testing scenarios   - standard crud operations   - 2 arrays, put both to the same table at the same time   - 2 fetch calls to the data database   - add 100k records to two different databases at the same time   - how can we check disc quota but also query this to display it on screen  ## method - onMessagehandle the message from the worker actions are performed in the worker using a uuid to identify the request   the promise is stored in the requests object and resolved when the worker returns the result  ***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||event|-|-|true|-|## method - connectconnect to the database and create the stores You control the version and what stores are created.  ***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|the step that is being performed|true|-||context|object|the context of the step|true|-||process|object|the process that is being performed|true|-||item|object|the item that is being processed|true|-||step.args.name|string|the name of the database|true|-||step.args.version|number|the version of the database|true|-||step.args.count|number|the number of stores to create|true|-||step.args.storeNames|Array|the names of the stores to create|true|-| you will need to manage those manually as no meta will be kept for them.  **Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "connect", {        "name": "data-manager",        "version": 1,        "count": 2        "storeNames": ["my_table_01", "my_table_02"]   });    ```***Example: json***```json {        "type": "idb",        "action": "connect",        "args": {            "name": "data-manager",            "version": 1,            "count": 2            "storeNames": ["my_table_01", "my_table_02"]        }   }  ```## method - disconnectdisconnect from the database***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|the step that is being performed|true|-||context|object|the context of the step|true|-||process|object|the process that is being performed|true|-||item|object|the item that is being processed|true|-||step.args.name|string|the name of the database|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "disconnect", {        "name": "data-manager"   });    ```***Example: json***```json {        "type": "idb",        "action": "disconnect",        "args": {            "name": "data-manager"        }   }  ```## method - get_available_storeget an available store from the database***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|the step that is being performed|true|-||context|object|the context of the step|true|-||process|object|the process that is being performed|true|-||item|object|the item that is being processed|true|-||step.args.name|string|the name of the database|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "get_available_store", {       "name": "data-manager"   });    ```***Example: json***```json {       "type": "idb",       "action": "get_available_store",       "args": {            "name": "data-manager"       }   }  ```## method - release_storesrelease the stores back to the database for usage***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|the step that is being performed|true|-||context|object|the context of the step|true|-||process|object|the process that is being performed|true|-||item|object|the item that is being processed|true|-||step.args.name|string|the name of the database|true|-||step.args.stores|array|the stores to release|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "release_stores", {        "name": "data-manager",        "stores": ["table_01", "table_02"]   });    ```***Example: json***```json {        "type": "idb",        "action": "release_stores",        "args": {            "name": "data-manager",            "stores": ["table_01", "table_02"]        }   }  ```## method - setadd these records to the database  ***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|-|step to process|true|-||context|-|context of the process|true|-||process|-|process to run|true|-||item|-|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.records|array|records to save|true|-| @parma step.args.clear {boolean} - clear the database before saving  **Returns**: {}  ***Example: javascript***```js await crs.call("idb", "set", {       "name": "data-manager",       "records": [...]       "store": "table_01",       "clear": true   });    ```***Example: json***```json {      "type": "idb",      "action": "set",      "args": {          "name": "data-manager",          "records": [...]          "store": "table_01",          "clear": true      }   }    ```## method - addadd a record to the database***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|-|step to process|true|-||context|-|context of the process|true|-||process|-|process to run|true|-||item|-|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.record|object|record to save|true|-|**Returns**: {Promise<>}  ***Example: javascript***```js await crs.call("idb", "add", {      "name": "data-manager",      "record": {...}      "store": "table_01"   });    ```***Example: json***```json {     "type": "idb",     "action": "add",     "args": {        "name": "data-manager",        "record": {...}        "store": "table_01"      }   }  ```## method - clearclear the database tables***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|-|step to process|true|-||context|-|context of the process|true|-||process|-|process to run|true|-||item|-|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.stores|array|stores to clear|true|-||step.args.zeroCount|boolean|zero the count|true|-||step.args.zeroTimeline|boolean|zero the timeline|true|-|**Returns**: {Promise<>}## method - get_allget all the record from a given database / table***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||name|string|name of the database to work with|true|-||store|string|store to get the records from|true|-|**Returns**: {}  ***Example: javascript***```js await crs.call("idb", "get_all", {     "name": "data-manager",     "store": "table_01"   });    ```***Example: json***```json {        "type": "idb",        "action": "get_all",        "args": {            "name": "data-manager",            "store": "table_01"        }   }  ```## method - getget a record from the database This can be either a single index item or a array of indexes  ***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|-|step to process|true|-||context|-|context of the process|true|-||process|-|process to run|true|-||item|-|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.indexes|number|array|indexes to get|true|-||step.args.store|string|store to get the records from|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "get", {       "name": "data-manager",       "indexes": [1,2,3],       "store": "table_01"   });    ```***Example: json***```json {       "type": "idb",       "action": "get",       "args": {            "name": "data-manager",            "indexes": [1,2,3],            "store": "table_01"       }   }  ```## method - get_batchget a sequential batch of records from the database***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|-|step to process|true|-||context|-|context of the process|true|-||process|-|process to run|true|-||item|-|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.startIndex|number|index to start from|true|-||step.args.endIndex|number|index to end at, use instead of count|false|-||step.args.count|number|number of records to get, use instead of endIndex|false|-|**Returns**: {Promise<void>}  ***Example: javascript***```js await crs.call("idb", "get_batch", {      "name": "data-manager",      "store": "table_01",      "startIndex": 1,      "endIndex": 10 // or "count": 10   });    ```***Example: json***```json {     "type": "idb",     "action": "get_batch",     "args": {        "name": "data-manager",        "store": "table_01",        "startIndex": 1,        "endIndex": 10 // or "count": 10     }   }  ```## method - get_pageget a page of records from the database This is similar to get_batch but uses page and pageSize instead of startIndex and endIndex  ***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.store|string|store to get the records from|true|-||step.args.page|number|page to get|true|-||step.args.pageSize|number|number of records that make up one page|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "get_page", {     "name": "data-manager",     "store": "table_01",     "page": 1,     "pageSize": 10   });    ```***Example: json***```json {       "type": "idb",       "action": "get_page",       "args": {           "name": "data-manager",           "store": "table_01",           "page": 1,           "pageSize": 10       }   }  ```## method - get_by_idget a record from the database by its id***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.store|string|store to get the records from|true|-||step.args.id|any|id field value of the record to get|true|-|**Returns**: {Promise<unknown>}## method - get_by_indexget a record from the database by an id, thus the model should have a id property on it.***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.store|string|store to get the records from|true|-||step.args.models|object|array|single model or array of models to update|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "get_by_index", {       "name": "data-manager",       "store": "table_01",       "models": [{id: 1, ...}, {id: 101, ...}]   });    ```***Example: json***```json {    "type": "idb",    "action": "get_by_index",    "args": {       "name": "data-manager",       "store": "table_01",       "models": [{id: 1, ...}, {id: 101, ...}]     }   }  ```## method - delete_olddb***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.duration|number|duration in milliseconds|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "delete_old_db", {      "duration": 604800000 // 7 days   });    ```***Example: json***```json {       "type": "idb",       "action": "delete_old_db",       "args": {          "duration": 604800000       }   }  ```## method - delete_dbdelete a database from the indexedDB***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.name|string|name of the database to delete|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "delete_db", {        "name": "data-manager"   });    ```***Example: json***```json {      "type": "idb",      "action": "delete_db",      "args": {          "name": "data-manager"      }   }  ```## method - delete_by_iddelete a record from the database by its id***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.store|string|store to get the records from|true|-||step.args.ids|any|id field value of the record to get|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "delete_by_id", {      "name": "data-manager",      "store": "table_01",      "ids": [1, 101]   });    ```***Example: json***```json {       "type": "idb",       "action": "delete_by_id",       "args": {           "name": "data-manager",           "store": "table_01",           "ids": [1, 101]       }   }  ```## method - delete_by_indexdelete a record from the database by its index or collection of indexes***parameters***|parameter|type|description|required|default||---------|----|-----------|--------|-------||step|object|step to process|true|-||context|object|context of the process|true|-||process|object|process to run|true|-||item|object|item to process|true|-||step.args.name|string|name of the database to work with|true|-||step.args.store|string|store to get the records from|true|-||step.args.index|number|array[number]|index field value of the record to get|true|-|**Returns**: {Promise<unknown>}  ***Example: javascript***```js await crs.call("idb", "delete_by_index", {     "name": "data-manager",     "store": "table_01",     "index": [1, 101]   });    ```***Example: json***```json {      "type": "idb",      "action": "delete_by_index",      "args": {          "name": "data-manager",          "store": "table_01",          "index": [1, 101]      }   }  ```