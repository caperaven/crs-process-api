import{createEventPacket as i,createEventParameters as l}from"./utils/create-event-parameters.js";import{parseEvent as p}from"./utils/parse-event.js";class u{async onEvent(e,t,r){await v(r.value,e)}async parse(e){p(e,this.getIntent)}getIntent(e){const t=e.split("("),r=t[0].split("["),a=r[0].trim(),o=r[1].replace("]","").split(",").map(c=>c.trim().replaceAll("'","")),s=l(a,t[1].replace(")",""));return s.queries=o,{provider:".post",value:s}}async clear(e){crs.binding.eventStore.clear(e)}}async function v(n,e){const t=Object.assign({},n),r=t.queries;delete t.queries;const a=i(n,e);a.key=n.event;for(const o of r)document.querySelectorAll(o).forEach(s=>{s.onMessage!=null&&s.onMessage(a)})}export{u as default};
